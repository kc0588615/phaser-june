"use strict";(globalThis.webpackChunkwiki=globalThis.webpackChunkwiki||[]).push([[2255],{28453(e,s,i){i.d(s,{R:()=>c,x:()=>a});var n=i(96540);const t={},r=n.createContext(t);function c(e){const s=n.useContext(r);return n.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:c(e.components),n.createElement(r.Provider,{value:s},e.children)}},57707(e,s,i){i.r(s),i.d(s,{assets:()=>o,contentTitle:()=>a,default:()=>p,frontMatter:()=>c,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"guides/game/species-discovery","title":"Species Discovery Flow","description":"How players progress through species identification","source":"@site/docs/guides/game/species-discovery.md","sourceDirName":"guides/game","slug":"/guides/game/species-discovery","permalink":"/phaser-june/docs/guides/game/species-discovery","draft":false,"unlisted":false,"editUrl":"https://github.com/kc0588615/phaser-june/tree/main/wiki/docs/guides/game/species-discovery.md","tags":[{"inline":true,"label":"guide","permalink":"/phaser-june/docs/tags/guide"},{"inline":true,"label":"game-logic","permalink":"/phaser-june/docs/tags/game-logic"},{"inline":true,"label":"species","permalink":"/phaser-june/docs/tags/species"}],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"Species Discovery Flow","description":"How players progress through species identification","tags":["guide","game-logic","species"]},"sidebar":"docsSidebar","previous":{"title":"Clue Board Implementation","permalink":"/phaser-june/docs/guides/game/clue-board"},"next":{"title":"Layout Restructure","permalink":"/phaser-june/docs/guides/game/layout-restructure"}}');var t=i(74848),r=i(28453);const c={sidebar_position:2,title:"Species Discovery Flow",description:"How players progress through species identification",tags:["guide","game-logic","species"]},a="Species Discovery Implementation",o={},l=[{value:"Overview",id:"overview",level:2},{value:"Species Queue Management",id:"species-queue-management",level:2},{value:"Guess Validation",id:"guess-validation",level:2},{value:"Player Tracking Integration",id:"player-tracking-integration",level:2},{value:"Related",id:"related",level:2}];function d(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"species-discovery-implementation",children:"Species Discovery Implementation"})}),"\n",(0,t.jsx)(s.p,{children:"How the game manages species progression and player discovery."}),"\n",(0,t.jsx)(s.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsx)(s.p,{children:"When a player clicks a location:"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsx)(s.li,{children:"Query returns multiple species at that location"}),"\n",(0,t.jsx)(s.li,{children:"Species are queued for sequential discovery"}),"\n",(0,t.jsx)(s.li,{children:"Player reveals clues \u2192 submits guess \u2192 advances to next species"}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"species-queue-management",children:"Species Queue Management"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-typescript",children:"// Game.ts\nprivate speciesQueue: Species[] = [];\nprivate currentSpeciesIndex: number = 0;\n\nprivate initializeBoardFromCesium(data: LocationData) {\n  this.speciesQueue = data.species;\n  this.currentSpeciesIndex = 0;\n  this.startNextSpecies();\n}\n\nprivate startNextSpecies() {\n  if (this.currentSpeciesIndex >= this.speciesQueue.length) {\n    EventBus.emit('all-species-completed', {\n      totalSpecies: this.speciesQueue.length\n    });\n    return;\n  }\n\n  const species = this.speciesQueue[this.currentSpeciesIndex];\n  this.selectedSpecies = species;\n\n  EventBus.emit('new-game-started', {\n    speciesName: 'Mystery Species',\n    speciesId: species.id,\n    totalSpecies: this.speciesQueue.length,\n    currentIndex: this.currentSpeciesIndex,\n    hiddenSpeciesName: species.common_name\n  });\n}\n"})}),"\n",(0,t.jsx)(s.h2,{id:"guess-validation",children:"Guess Validation"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-typescript",children:"private handleSpeciesGuess(data: GuessPayload) {\n  const correct = data.guessedName.toLowerCase() ===\n    this.selectedSpecies.common_name.toLowerCase();\n\n  if (correct) {\n    this.recordDiscovery(this.selectedSpecies.id);\n    this.currentSpeciesIndex++;\n    this.startNextSpecies();\n  }\n}\n"})}),"\n",(0,t.jsx)(s.h2,{id:"player-tracking-integration",children:"Player Tracking Integration"}),"\n",(0,t.jsx)(s.p,{children:"Discoveries are recorded via Drizzle for stats:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-typescript",children:"async function recordDiscovery(speciesId: number) {\n  await trackSpeciesDiscovery(playerId, speciesId, {\n    sessionId: currentSessionId,\n    cluesUnlockedBeforeGuess: clueCount,\n    incorrectGuessesCount: guessAttempts,\n    scoreEarned: scoreEarned\n  });\n}\n"})}),"\n",(0,t.jsx)(s.h2,{id:"related",children:"Related"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"/docs/guides/game/clue-board",children:"Clue Board Implementation"})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"/docs/guides/player/tracking-implementation",children:"Player Tracking"})}),"\n"]})]})}function p(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}}}]);