"use strict";(globalThis.webpackChunkwiki=globalThis.webpackChunkwiki||[]).push([[70508],{28453(e,n,i){i.d(n,{R:()=>r,x:()=>l});var s=i(96540);const t={},a=s.createContext(t);function r(e){const n=s.useContext(a);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),s.createElement(a.Provider,{value:n},e.children)}},80611(e,n,i){i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"architecture/ui-display-system","title":"UI Display System Reference","description":"Layout variables, gem sizing, and responsive behavior","source":"@site/docs/architecture/ui-display-system.md","sourceDirName":"architecture","slug":"/architecture/ui-display-system","permalink":"/phaser-june/docs/architecture/ui-display-system","draft":false,"unlisted":false,"editUrl":"https://github.com/kc0588615/phaser-june/tree/main/wiki/docs/architecture/ui-display-system.md","tags":[{"inline":true,"label":"architecture","permalink":"/phaser-june/docs/tags/architecture"},{"inline":true,"label":"layout","permalink":"/phaser-june/docs/tags/layout"},{"inline":true,"label":"css","permalink":"/phaser-june/docs/tags/css"},{"inline":true,"label":"responsive","permalink":"/phaser-june/docs/tags/responsive"}],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"title":"UI Display System Reference","description":"Layout variables, gem sizing, and responsive behavior","tags":["architecture","layout","css","responsive"]},"sidebar":"docsSidebar","previous":{"title":"Game Reactivity Guide","permalink":"/phaser-june/docs/architecture/game-reactivity"},"next":{"title":"Page Routing Infrastructure","permalink":"/phaser-june/docs/architecture/page-routing"}}');var t=i(74848),a=i(28453);const r={sidebar_position:3,title:"UI Display System Reference",description:"Layout variables, gem sizing, and responsive behavior",tags:["architecture","layout","css","responsive"]},l="UI Display System Reference",o={},d=[{value:"Layout Architecture",id:"layout-architecture",level:2},{value:"Container Structure",id:"container-structure",level:3},{value:"Layout States",id:"layout-states",level:3},{value:"CSS Variables (MainAppLayout.tsx)",id:"css-variables-mainapplayouttsx",level:3},{value:"Phaser Layout Variables",id:"phaser-layout-variables",level:2},{value:"Core Dimensions (Game.ts)",id:"core-dimensions-gamets",level:3},{value:"Dimension Calculation",id:"dimension-calculation",level:3},{value:"BoardView Layout Functions",id:"boardview-layout-functions",level:2},{value:"Position Calculation",id:"position-calculation",level:3},{value:"Scale Calculation",id:"scale-calculation",level:3},{value:"Animation Timings",id:"animation-timings",level:2},{value:"CSS Transitions",id:"css-transitions",level:3},{value:"Phaser Tweens",id:"phaser-tweens",level:3},{value:"Responsive Patterns",id:"responsive-patterns",level:2},{value:"Window Resize Flow",id:"window-resize-flow",level:3},{value:"Map Minimize Flow",id:"map-minimize-flow",level:3},{value:"Board Recreation Flow",id:"board-recreation-flow",level:3},{value:"UI Element Positioning",id:"ui-element-positioning",level:2},{value:"Score/Moves Display",id:"scoremoves-display",level:3},{value:"Text Word Wrap",id:"text-word-wrap",level:3},{value:"Debug Utilities",id:"debug-utilities",level:2},{value:"Visual Container Borders",id:"visual-container-borders",level:3},{value:"Console Logs",id:"console-logs",level:3},{value:"Common Issues",id:"common-issues",level:2},{value:"Extension Points",id:"extension-points",level:2},{value:"Adding New Layout States",id:"adding-new-layout-states",level:3},{value:"Mobile Breakpoints",id:"mobile-breakpoints",level:3},{value:"Related Documentation",id:"related-documentation",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"ui-display-system-reference",children:"UI Display System Reference"})}),"\n",(0,t.jsx)(n.p,{children:"Comprehensive reference for the reactive UI display system, including layout variables, CSS transitions, and responsive patterns."}),"\n",(0,t.jsx)(n.h2,{id:"layout-architecture",children:"Layout Architecture"}),"\n",(0,t.jsx)(n.h3,{id:"container-structure",children:"Container Structure"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-css",children:"/* 3-section vertical layout */\n.app-container {\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n}\n\n.cesium-container {\n  height: 30%;        /* Map section */\n  transition: height 0.3s ease-in-out;\n}\n\n.phaser-container {\n  flex: 1;            /* Game fills remaining */\n}\n\n.game-ui-panel {\n  height: 150px;      /* Clue panel */\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"layout-states",children:"Layout States"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"State"}),(0,t.jsx)(n.th,{children:"Map Height"}),(0,t.jsx)(n.th,{children:"Game Height"}),(0,t.jsx)(n.th,{children:"Clue Panel"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Normal"}),(0,t.jsx)(n.td,{children:"30%"}),(0,t.jsx)(n.td,{children:"calc(100% - 150px)"}),(0,t.jsx)(n.td,{children:"150px"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Map Minimized"}),(0,t.jsx)(n.td,{children:"0%"}),(0,t.jsx)(n.td,{children:"60%"}),(0,t.jsx)(n.td,{children:"40%"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"css-variables-mainapplayouttsx",children:"CSS Variables (MainAppLayout.tsx)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"const cesiumContainerStyle: React.CSSProperties = {\n  width: '100%',\n  height: cesiumMinimized ? '0%' : '30%',\n  minHeight: '0px',\n  borderBottom: cesiumMinimized ? 'none' : '2px solid #555',\n  position: 'relative',\n  transition: 'height 0.3s ease-in-out',\n  overflow: 'hidden'\n};\n\nconst phaserGameWrapperStyle: React.CSSProperties = {\n  width: '100%',\n  height: cesiumMinimized ? '60%' : 'calc(100% - 150px)',\n  display: 'flex',\n  alignItems: 'center',\n  justifyContent: 'center'\n};\n\nconst gameUiPanelStyle: React.CSSProperties = {\n  width: '100%',\n  height: cesiumMinimized ? '40%' : '150px',\n  padding: '10px',\n  boxSizing: 'border-box',\n  borderTop: '2px solid #555',\n  overflowY: 'auto',\n  backgroundColor: '#282c34',\n  color: 'white',\n  transition: 'height 0.3s ease-in-out'\n};\n"})}),"\n",(0,t.jsx)(n.h2,{id:"phaser-layout-variables",children:"Phaser Layout Variables"}),"\n",(0,t.jsx)(n.h3,{id:"core-dimensions-gamets",children:"Core Dimensions (Game.ts)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// Grid configuration\nconst GRID_COLS = 7;        // Board width\nconst GRID_ROWS = 8;        // Board height\nconst TOP_UI_OFFSET = 60;   // Space for score/moves text\n\n// Dynamic (calculated at runtime)\nprivate gemSize: number = 64;\nprivate boardOffset: BoardOffset = { x: 0, y: 0 };\nprivate isMapMinimized: boolean = false;\n"})}),"\n",(0,t.jsx)(n.h3,{id:"dimension-calculation",children:"Dimension Calculation"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"private calculateBoardDimensions(): void {\n  const { width, height } = this.scale;\n\n  const usableWidth = width * 0.95;           // 5% margin each side\n  const usableHeight = this.isMapMinimized\n    ? height - TOP_UI_OFFSET - 20\n    : height * 0.90;                          // 10% margin top/bottom\n\n  // Constrain to fit\n  const sizeFromWidth = Math.floor(usableWidth / GRID_COLS);\n  const sizeFromHeight = Math.floor(usableHeight / GRID_ROWS);\n  this.gemSize = Math.max(24, Math.min(sizeFromWidth, sizeFromHeight));\n\n  // Center board\n  const boardWidth = GRID_COLS * this.gemSize;\n  const boardHeight = GRID_ROWS * this.gemSize;\n\n  this.boardOffset = {\n    x: Math.round((width - boardWidth) / 2),\n    y: this.isMapMinimized\n      ? TOP_UI_OFFSET\n      : Math.round((height - boardHeight) / 2)\n  };\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"boardview-layout-functions",children:"BoardView Layout Functions"}),"\n",(0,t.jsx)(n.h3,{id:"position-calculation",children:"Position Calculation"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// Convert grid coords to pixel position\nprivate getSpritePosition(gridX: number, gridY: number): { x: number; y: number } {\n  return {\n    x: this.boardOffset.x + gridX * this.gemSize + this.gemSize / 2,\n    y: this.boardOffset.y + gridY * this.gemSize + this.gemSize / 2\n  };\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"scale-calculation",children:"Scale Calculation"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// 90% of cell size for visual spacing\nprivate calculateSpriteScale(sprite: Phaser.GameObjects.Sprite): number {\n  const maxFrameDimension = Math.max(sprite.frame.width, sprite.frame.height);\n  return (this.gemSize * 0.9) / maxFrameDimension;\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"animation-timings",children:"Animation Timings"}),"\n",(0,t.jsx)(n.h3,{id:"css-transitions",children:"CSS Transitions"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-css",children:".cesium-container {\n  transition: height 0.3s ease-in-out;\n}\n\n.game-ui-panel {\n  transition: height 0.3s ease-in-out;\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"phaser-tweens",children:"Phaser Tweens"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Animation"}),(0,t.jsx)(n.th,{children:"Duration"}),(0,t.jsx)(n.th,{children:"Easing"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Layout update"}),(0,t.jsx)(n.td,{children:"300ms"}),(0,t.jsx)(n.td,{children:"Sine.easeInOut"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Gem explosion"}),(0,t.jsx)(n.td,{children:"200ms"}),(0,t.jsx)(n.td,{children:"Power2.easeOut"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Gem fall"}),(0,t.jsx)(n.td,{children:"150ms base"}),(0,t.jsx)(n.td,{children:"Bounce.easeOut"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Swap snap"}),(0,t.jsx)(n.td,{children:"100ms"}),(0,t.jsx)(n.td,{children:"Sine.easeInOut"})]})]})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// From constants.ts (conceptual)\nconst TWEEN_DURATION_LAYOUT_UPDATE = 300;\nconst TWEEN_DURATION_EXPLODE = 200;\nconst TWEEN_DURATION_FALL_BASE = 150;\nconst TWEEN_DURATION_SNAP = 100;\n"})}),"\n",(0,t.jsx)(n.h2,{id:"responsive-patterns",children:"Responsive Patterns"}),"\n",(0,t.jsx)(n.h3,{id:"window-resize-flow",children:"Window Resize Flow"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Browser resize\n    \u2193\nPhaser.Scale.Events.RESIZE\n    \u2193\nhandleResize()\n    \u2193\ncalculateBoardDimensions()\n    \u2193\nUpdate UI text positions\n    \u2193\nboardView.updateVisualLayout()\n    \u2193\nGems animate to new positions\n"})}),"\n",(0,t.jsx)(n.h3,{id:"map-minimize-flow",children:"Map Minimize Flow"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"User clicks minimize\n    \u2193\nsetCesiumMinimized(!cesiumMinimized)\n    \u2193\nCSS transitions start\n    \u2193\nuseEffect triggers EventBus.emit('layout-changed')\n    \u2193\nGame.handleLayoutChange()\n    \u2193\nhandleResize() recalculates\n    \u2193\nGems animate to new positions\n"})}),"\n",(0,t.jsx)(n.h3,{id:"board-recreation-flow",children:"Board Recreation Flow"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"New location selected\n    \u2193\ninitializeBoardFromCesium()\n    \u2193\ncalculateBoardDimensions()\n    \u2193\nupdateDimensions() (no animation)\n    \u2193\ndestroyBoard()\n    \u2193\ncreateBoard() at correct positions\n"})}),"\n",(0,t.jsx)(n.h2,{id:"ui-element-positioning",children:"UI Element Positioning"}),"\n",(0,t.jsx)(n.h3,{id:"scoremoves-display",children:"Score/Moves Display"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// Score: top-left\nthis.scoreText.setPosition(20, 20);\n\n// Moves: top-right\nthis.movesText.setPosition(width - 20, 20);\n\n// Status: centered\nthis.statusText.setPosition(width / 2, height / 2);\n"})}),"\n",(0,t.jsx)(n.h3,{id:"text-word-wrap",children:"Text Word Wrap"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"if (this.statusText?.style?.setWordWrapWidth) {\n  this.statusText.style.setWordWrapWidth(width * 0.8);\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"debug-utilities",children:"Debug Utilities"}),"\n",(0,t.jsx)(n.h3,{id:"visual-container-borders",children:"Visual Container Borders"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-css",children:"/* Add to see layout */\n.cesium-container { border: 2px solid blue; }\n.phaser-container { border: 2px solid green; }\n.game-ui-panel { border: 2px solid yellow; }\n"})}),"\n",(0,t.jsx)(n.h3,{id:"console-logs",children:"Console Logs"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:'// Key log points\n"Game Scene: Layout changed - Map minimized = true/false"\n"Game Scene: Resize detected."\n"BoardView: Updating visual layout."\n"BoardView: Updating dimensions (no animation)."\n'})}),"\n",(0,t.jsx)(n.h2,{id:"common-issues",children:"Common Issues"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Issue"}),(0,t.jsx)(n.th,{children:"Cause"}),(0,t.jsx)(n.th,{children:"Solution"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Board jumps after recreation"}),(0,t.jsx)(n.td,{children:"Using animated update"}),(0,t.jsxs)(n.td,{children:["Use ",(0,t.jsx)(n.code,{children:"updateDimensions()"})," before recreation"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Animations conflict"}),(0,t.jsx)(n.td,{children:"Multiple tweens on same target"}),(0,t.jsxs)(n.td,{children:["Call ",(0,t.jsx)(n.code,{children:"killTweensOf(sprite)"})," first"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Layout doesn't update"}),(0,t.jsx)(n.td,{children:"Event listener not set up"}),(0,t.jsx)(n.td,{children:"Check EventBus subscription in create()"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Performance issues"}),(0,t.jsx)(n.td,{children:"Too many concurrent tweens"}),(0,t.jsx)(n.td,{children:"Pool sprites, debounce resize"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"extension-points",children:"Extension Points"}),"\n",(0,t.jsx)(n.h3,{id:"adding-new-layout-states",children:"Adding New Layout States"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Add React state variable"}),"\n",(0,t.jsx)(n.li,{children:"Create CSS styles for new state"}),"\n",(0,t.jsxs)(n.li,{children:["Add event type to ",(0,t.jsx)(n.code,{children:"EventPayloads"})]}),"\n",(0,t.jsxs)(n.li,{children:["Handle event in ",(0,t.jsx)(n.code,{children:"Game.ts"})]}),"\n",(0,t.jsxs)(n.li,{children:["Update ",(0,t.jsx)(n.code,{children:"calculateBoardDimensions()"})," logic"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"mobile-breakpoints",children:"Mobile Breakpoints"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"const isMobile = width < 768;\nconst boardMargin = isMobile ? 0.02 : 0.05;\n"})}),"\n",(0,t.jsx)(n.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/docs/architecture/eventbus-display",children:"EventBus Architecture"})," - Communication patterns"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/docs/architecture/game-reactivity",children:"Game Reactivity"})," - MVC and resize handling"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}}}]);